# Gmail Subscription Cleaner - Правила разработки

## Технологический стек
- Браузерное расширение для Chrome (Manifest V3)
- Vanilla JavaScript (без фреймворков для простоты и производительности)
- Gmail API для работы с почтой
- Chrome Storage API для хранения данных
- OAuth 2.0 для авторизации

## Архитектурные принципы
- Следовать принципам SOLID и KISS
- Разделение ответственности: background worker для API, popup для UI, utils для логики
- Асинхронная работа с API через async/await
- Обработка всех ошибок с понятными сообщениями пользователю
- Кэширование данных для минимизации запросов к Gmail API

## Структура кода
- Каждый модуль отвечает за одну задачу
- Использовать ES6+ синтаксис (const/let, arrow functions, destructuring)
- Именование: camelCase для переменных/функций, PascalCase для классов
- Комментарии на русском языке для сложной логики

## Gmail API
- Использовать batch requests где возможно
- Соблюдать rate limits (250 quota units/user/second)
- Кэшировать результаты в chrome.storage.local
- Всегда проверять авторизацию перед запросами
- Обрабатывать ошибки 401, 403, 429, 500

## UI/UX принципы
- Минималистичный и понятный интерфейс
- Подтверждение перед деструктивными операциями (удаление)
- Показывать прогресс для длительных операций
- Адаптивный дизайн popup (400-600px ширина)
- Визуальная обратная связь на все действия

## Безопасность
- Белый список защищает важные письма
- Никогда не удалять письма без подтверждения пользователя
- Хранить минимум данных локально
- Не логировать содержимое писем
- Использовать chrome.identity для OAuth

## Производительность
- Виртуализация списков при >100 элементах
- Debounce для поиска (300ms)
- Lazy loading деталей писем
- Оптимизация DOM операций (batch updates)
- Минимизация перерисовок UI

## Тестирование
- Тестировать на реальных Gmail аккаунтах с разным объемом писем
- Проверять edge cases: нет писем, нет интернета, отозван доступ
- Тестировать на разных разрешениях экрана
- Проверять memory leaks при длительной работе

## Обработка ошибок
- Показывать понятные сообщения пользователю
- Логировать технические детали в console для отладки
- Graceful degradation при недоступности API
- Retry логика для временных сбоев (с exponential backoff)

## Код-стайл
- Использовать точку с запятой
- Отступы: 2 пробела
- Максимальная длина строки: 100 символов
- Пустая строка между логическими блоками
- Деструктуризация объектов где уместно

## Комментарии и документация
- JSDoc для публичных функций
- Inline комментарии для сложной логики
- README с инструкцией по установке и использованию
- Описание всех permissions в manifest

## Не делать
- Не использовать jQuery или другие тяжелые библиотеки
- Не хранить OAuth токены в небезопасных местах
- Не делать синхронные операции в UI потоке
- Не игнорировать ошибки API
- Не удалять письма без явного согласия пользователя

